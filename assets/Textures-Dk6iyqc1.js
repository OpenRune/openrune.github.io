import{r as l,j as e}from"./index-CuZpSdon.js";import{F as H,b as M}from"./DefaultLayout-DXFJkhDj.js";import{R as g,J as u}from"./jszip.min-BaKiMoL4.js";import{C as f}from"./ColorBox-CSFfEJN5.js";import{F as d}from"./FileSaver.min-2JJULHWN.js";import{F as P}from"./FilterTable-CP2ZIMhU.js";import{g as z,h as _,i as N,j as G,k as J,C as h,m as L,l as Y}from"./CSmartTable-D4j29sc8.js";import"./ColorUtils-Dk721PgH.js";const ee=()=>{l.useState(30);const[o,y]=l.useState([]),[j,p]=l.useState([]),[b,m]=l.useState(!0),[v,c]=l.useState(!1),[i,w]=l.useState(null),[S,D]=l.useState(""),[C,T]=l.useState("all");l.useState(!0),l.useEffect(()=>{(async()=>{try{const t=await fetch("https://osrs.openrune.dev/public/texture/");if(!t.ok)throw new Error("Network response was not ok");const n=(await t.json()).map(r=>({id:r.id,isTransparent:r.isTransparent,averageRgb:r.averageRgb,animationDirection:r.animationDirection,animationSpeed:r.animationSpeed,spriteIds:r.fileIds}));y(n.sort((r,E)=>r.id-E.id)),p(n)}catch(t){console.error("Error fetching data:",t)}finally{m(!1)}})()},[]);const x=s=>{w(s),c(!0)},I=s=>{const t=s.target.value;D(t);const a=o.filter(n=>n.id.toString().includes(t));p(a)},k=s=>{const t=s.target.value;T(t);const a=o.filter(n=>t==="all"?!0:t==="true"?n.isTransparent:!n.isTransparent);p(a)},F=async s=>{if(!(!s||s.spriteIds.length===0))if(s.spriteIds.length===1){const a=await(await fetch(`https://osrs.openrune.dev/public/sprite/${s.spriteIds[0]}.png`)).blob();d.saveAs(a,`${s.spriteIds[0]}.png`)}else{const t=new u;await Promise.all(s.spriteIds.map(async a=>{const r=await(await fetch(`https://osrs.openrune.dev/public/sprite/${a}.png`)).blob();t.file(`${a}.png`,r)})),t.generateAsync({type:"blob"}).then(a=>{d.saveAs(a,`textures_${s.id}.zip`)})}},R=async()=>{const s=new u;await Promise.all(o.map(async t=>{if(t.spriteIds.length===1){const n=await(await fetch(`https://osrs.openrune.dev/public/sprite/${t.spriteIds[0]}.png`)).blob();s.file(`${t.spriteIds[0]}.png`,n)}else await Promise.all(t.spriteIds.map(async a=>{const r=await(await fetch(`https://osrs.openrune.dev/public/sprite/${a}.png`)).blob();s.file(`${a}.png`,r)}))})),s.generateAsync({type:"blob"}).then(t=>{d.saveAs(t,"all_textures.zip")})},A=[{key:"id",label:"ID",_style:{width:"30%"},filter:!1,sorter:!1},{key:"transparency",label:"Transparency",filter:!1,sorter:!1},{key:"averageRgb",label:"Average RGB",filter:!1,sorter:!1},{key:"animationDirection",label:"Direction",filter:!1,sorter:!1},{key:"animationSpeed",label:"Speed",filter:!1,sorter:!1},{key:"sprites",label:"Sprites",filter:!1,sorter:!1}],$={transparency:s=>e.jsx("td",{children:s.isTransparent?"Yes":"No"}),averageRgb:s=>e.jsx("td",{children:e.jsx(f,{width:80,height:80,packedHsl:s.averageRgb,tooltip:!0,showHex:!0})}),sprites:s=>e.jsx("td",{style:{display:"flex",gap:"10px"},children:s.spriteIds.map(t=>e.jsx(g,{rounded:!0,thumbnail:!0,id:t,width:80,height:80,keepAspectRatio:!0,onClick:()=>x(s)},t))})},B=e.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(H,{style:{marginRight:"8px"}}),e.jsx(L,{type:"text",placeholder:"Search ID",value:S,onChange:I,style:{width:"150px"}})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(M,{style:{marginRight:"8px"}})," ",e.jsxs(Y,{value:C,onChange:k,style:{width:"150px"},children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"true",children:"Transparent"}),e.jsx("option",{value:"false",children:"Opaque"})]})]}),e.jsx(h,{color:"primary",onClick:R,style:{marginLeft:"auto"},children:"Download All Textures"})]});return e.jsxs(e.Fragment,{children:[e.jsx(P,{pageTitle:"Textures",tableData:j,columns:A,scopedColumns:$,loading:b,customFilters:B,handleRowClick:x}),i&&e.jsxs(z,{alignment:"center",visible:v,onClose:()=>c(!1),children:[e.jsx(_,{children:e.jsx(N,{children:"Texture Details"})}),e.jsxs(G,{children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",i.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Transparent:"})," ",i.isTransparent?"Yes":"No"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[e.jsx("strong",{style:{marginRight:"10px"},children:"Average RGB:"}),e.jsx(f,{width:55,height:55,tooltip:!0,showHex:!0,packedHsl:i.averageRgb})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Animation Direction:"})," ",i.animationDirection]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Animation Speed:"})," ",i.animationSpeed]}),e.jsx("p",{children:e.jsx("strong",{children:"Sprites:"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:i.spriteIds.map(s=>e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx(g,{id:s,width:80,height:80,keepAspectRatio:!0}),e.jsx("p",{children:s})]},s))})]}),e.jsxs(J,{children:[e.jsx(h,{color:"primary",onClick:()=>F(i),children:"Download"}),e.jsx(h,{color:"secondary",onClick:()=>c(!1),children:"Close"})]})]})]})};export{ee as default};
//# sourceMappingURL=Textures-Dk6iyqc1.js.map
