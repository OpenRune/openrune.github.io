{"version":3,"file":"Models-DRDw04Sv.js","sources":["../../src/views/Models.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  CButton,\n  CFormInput\n} from \"@coreui/react-pro\";\nimport FilterTable from \"src/components/FilterTable\";\nimport { useModal } from \"src/api/ModalProvider\";\nimport RsModel from \"src/components/RsModel\"; // Import the modal context and provider\n\nconst Models = () => {\n  const [tableData, setTableData] = useState([]);\n  const [filteredData, setFilteredData] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchId, setSearchId] = useState('');\n\n  const { openModal } = useModal(); // Access the modal opening function\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await fetch('http://134.195.88.53:8090/public/model/');\n        if (!response.ok) throw new Error('Network response was not ok');\n\n        const data = await response.json();\n        const formattedData = Object.values(data).map((item, index) => {\n          const totalAttachments = item.attachments.items.length +\n            item.attachments.objects.length +\n            item.attachments.npcs.length;\n\n          return {\n            id: index,\n            totalFaces: item.totalFaces,\n            totalVerts: item.totalVerts,\n            attachments: totalAttachments,\n          };\n        });\n\n        setTableData(formattedData.sort((a, b) => a.id - b.id));\n        setFilteredData(formattedData);\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, []);\n\n  const handleSearchIdChange = (e) => {\n    const value = e.target.value;\n    setSearchId(value);\n\n    const filtered = tableData.filter((item) =>\n      item.id.toString().includes(value)\n    );\n\n    setFilteredData(filtered);\n  };\n\n  const handleRowClick = (modelId) => {\n    openModal(modelId); // Open the modal with the selected model ID\n  };\n\n  const customFilters = (\n    <div style={{ display: 'flex', gap: '20px', alignItems: 'center', marginBottom: '10px' }}>\n      <div style={{ display: 'flex', alignItems: 'center' }}>\n        <CFormInput\n          type=\"text\"\n          placeholder=\"Search ID\"\n          value={searchId}\n          onChange={handleSearchIdChange}\n          style={{ width: '150px', padding: '8px', marginRight: '8px' }}\n        />\n      </div>\n    </div>\n  );\n\n  const columns = [\n    {\n      key: 'id',\n      label: 'ID',\n      _style: { width: '10%' },\n      filter: false,\n      sorter: false,\n    },\n    {\n      key: 'totalFaces',\n      label: 'Total Faces',\n      _style: { width: '20%' },\n      filter: false,\n      sorter: false,\n    },\n    {\n      key: 'totalVerts',\n      label: 'Total Verts',\n      _style: { width: '20%' },\n      filter: false,\n      sorter: false,\n    },\n    {\n      key: 'attachments',\n      label: 'Attachments',\n      _style: { width: '30%' },\n      filter: false,\n      sorter: false,\n    },\n    {\n      key: 'view',\n      label: 'View',\n      _style: { width: '5%' },\n      filter: false,\n      sorter: false,\n    },\n  ];\n\n  const scopedColumns = {\n    view: (item) => (\n      <td>\n        <CButton color=\"primary\" onClick={() => handleRowClick(item.id)}>\n          View\n        </CButton>\n      </td>\n    ),\n  };\n\n  return (\n    <>\n      <FilterTable\n        pageTitle={\"Models\"}\n        tableData={filteredData}\n        fetchData={() => {}}\n        customFilters={customFilters}\n        columns={columns}\n        scopedColumns={scopedColumns}\n        loading={loading}\n        handleRowClick={handleRowClick}\n      />\n      <RsModel />\n    </>\n  );\n};\n\nexport default Models;\n"],"names":["Models","tableData","setTableData","useState","filteredData","setFilteredData","loading","setLoading","searchId","setSearchId","openModal","useModal","useEffect","response","data","formattedData","item","index","totalAttachments","b","error","handleSearchIdChange","e","value","filtered","handleRowClick","modelId","customFilters","jsx","CFormInput","columns","scopedColumns","CButton","jsxs","Fragment","FilterTable","RsModel"],"mappings":"oUASA,MAAMA,EAAS,IAAM,CACnB,KAAM,CAACC,EAAWC,CAAY,EAAIC,EAAA,SAAS,CAAE,CAAA,EACvC,CAACC,EAAcC,CAAe,EAAIF,EAAA,SAAS,CAAE,CAAA,EAC7C,CAACG,EAASC,CAAU,EAAIJ,WAAS,EAAI,EACrC,CAACK,EAAUC,CAAW,EAAIN,WAAS,EAAE,EAErC,CAAE,UAAAO,GAAcC,IAEtBC,EAAAA,UAAU,IAAM,EACI,SAAY,CACxB,GAAA,CACI,MAAAC,EAAW,MAAM,MAAM,yCAAyC,EACtE,GAAI,CAACA,EAAS,GAAU,MAAA,IAAI,MAAM,6BAA6B,EAEzD,MAAAC,EAAO,MAAMD,EAAS,OACtBE,EAAgB,OAAO,OAAOD,CAAI,EAAE,IAAI,CAACE,EAAMC,IAAU,CACvD,MAAAC,EAAmBF,EAAK,YAAY,MAAM,OAC9CA,EAAK,YAAY,QAAQ,OACzBA,EAAK,YAAY,KAAK,OAEjB,MAAA,CACL,GAAIC,EACJ,WAAYD,EAAK,WACjB,WAAYA,EAAK,WACjB,YAAaE,CAAA,CACf,CACD,EAEYhB,EAAAa,EAAc,KAAK,CAAC,EAAGI,IAAM,EAAE,GAAKA,EAAE,EAAE,CAAC,EACtDd,EAAgBU,CAAa,QACtBK,EAAO,CACN,QAAA,MAAM,uBAAwBA,CAAK,CAAA,QAC3C,CACAb,EAAW,EAAK,CAClB,CAAA,IAIJ,EAAG,CAAE,CAAA,EAEC,MAAAc,EAAwBC,GAAM,CAC5B,MAAAC,EAAQD,EAAE,OAAO,MACvBb,EAAYc,CAAK,EAEjB,MAAMC,EAAWvB,EAAU,OAAQe,GACjCA,EAAK,GAAG,SAAS,EAAE,SAASO,CAAK,CAAA,EAGnClB,EAAgBmB,CAAQ,CAAA,EAGpBC,EAAkBC,GAAY,CAClChB,EAAUgB,CAAO,CAAA,EAGbC,QACH,MAAI,CAAA,MAAO,CAAE,QAAS,OAAQ,IAAK,OAAQ,WAAY,SAAU,aAAc,MAAO,EACrF,eAAC,MAAI,CAAA,MAAO,CAAE,QAAS,OAAQ,WAAY,QACzC,EAAA,SAAAC,EAAA,IAACC,EAAA,CACC,KAAK,OACL,YAAY,YACZ,MAAOrB,EACP,SAAUa,EACV,MAAO,CAAE,MAAO,QAAS,QAAS,MAAO,YAAa,KAAM,CAAA,CAAA,CAEhE,CAAA,CACF,CAAA,EAGIS,EAAU,CACd,CACE,IAAK,KACL,MAAO,KACP,OAAQ,CAAE,MAAO,KAAM,EACvB,OAAQ,GACR,OAAQ,EACV,EACA,CACE,IAAK,aACL,MAAO,cACP,OAAQ,CAAE,MAAO,KAAM,EACvB,OAAQ,GACR,OAAQ,EACV,EACA,CACE,IAAK,aACL,MAAO,cACP,OAAQ,CAAE,MAAO,KAAM,EACvB,OAAQ,GACR,OAAQ,EACV,EACA,CACE,IAAK,cACL,MAAO,cACP,OAAQ,CAAE,MAAO,KAAM,EACvB,OAAQ,GACR,OAAQ,EACV,EACA,CACE,IAAK,OACL,MAAO,OACP,OAAQ,CAAE,MAAO,IAAK,EACtB,OAAQ,GACR,OAAQ,EACV,CAAA,EAGIC,EAAgB,CACpB,KAAOf,GACJY,MAAA,KAAA,CACC,eAACI,EAAQ,CAAA,MAAM,UAAU,QAAS,IAAMP,EAAeT,EAAK,EAAE,EAAG,eAEjE,CAAA,EACF,CAAA,EAIJ,OAEIiB,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAN,EAAA,IAACO,EAAA,CACC,UAAW,SACX,UAAW/B,EACX,UAAW,IAAM,CAAC,EAClB,cAAAuB,EACA,QAAAG,EACA,cAAAC,EACA,QAAAzB,EACA,eAAAmB,CAAA,CACF,QACCW,EAAQ,EAAA,CACX,CAAA,CAAA,CAEJ"}