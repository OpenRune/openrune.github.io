import{r as a,R as p,P as o,j as e}from"./index-CuZpSdon.js";import{R as k,J as K}from"./jszip.min-BaKiMoL4.js";import{F as Q}from"./FileSaver.min-2JJULHWN.js";import{F as W}from"./FilterTable-CP2ZIMhU.js";import{d as D,b as u,a as E,o as Y,p as _,g as M,h as I,i as A,j as $,k as L,C as S}from"./CSmartTable-D4j29sc8.js";import{f as ee}from"./DefaultLayout-DXFJkhDj.js";var P=a.createContext({}),V=a.forwardRef(function(s,f){var t=s.children,h=s.className,m=D(s,["children","className"]);return p.createElement("div",u({className:E("progress-stacked",h),ref:f},m),p.createElement(P.Provider,{value:{stacked:!0}},t))});V.propTypes={children:o.node,className:o.string};V.displayName="CProgressStacked";var R=a.forwardRef(function(s,f){var t,h=s.children,m=s.animated,w=s.className,y=s.color,l=s.value,g=l===void 0?0:l,v=s.variant,b=D(s,["children","animated","className","color","value","variant"]),d=a.useContext(P).stacked;return p.createElement("div",u({className:E("progress-bar",(t={},t["bg-".concat(y)]=y,t["progress-bar-".concat(v)]=v,t["progress-bar-animated"]=m,t),w)},!d&&{style:{width:"".concat(g,"%")}},b,{ref:f}),h)});R.propTypes={animated:o.bool,children:o.node,className:o.string,color:o.oneOfType([Y,_]),value:o.number,variant:o.oneOf(["striped"])};R.displayName="CProgressBar";var B=a.forwardRef(function(s,f){var t=s.children,h=s.className,m=s.height,w=s.progressBarClassName,y=s.thin,l=s.value,g=s.white,v=D(s,["children","className","height","progressBarClassName","thin","value","white"]),b=a.useContext(P).stacked;return p.createElement("div",u({className:E("progress",{"progress-thin":y,"progress-white":g},h)},l!==void 0&&{role:"progressbar","aria-valuenow":l,"aria-valuemin":0,"aria-valuemax":100},{style:u(u({},m?{height:"".concat(m,"px")}:{}),b?{width:"".concat(l,"%")}:{}),ref:f}),p.Children.toArray(t).some(function(d){return d.type&&d.type.displayName==="CProgressBar"})?p.Children.map(t,function(d){if(p.isValidElement(d)&&d.type.displayName==="CProgressBar")return p.cloneElement(d,u(u({},l&&{value:l}),v))}):p.createElement(R,u({},w&&{className:w},{value:l},v),t))});B.propTypes={children:o.node,className:o.string,height:o.number,progressBarClassName:o.string,thin:o.bool,value:o.number,white:o.bool};B.displayName="CProgress";const le=()=>{const[s,f]=a.useState([]),[t,h]=a.useState([]),[m,w]=a.useState(!0),[y,l]=a.useState(!1),[g,v]=a.useState(null),[b,d]=a.useState(""),[O,j]=a.useState(!1),[N,z]=a.useState(0);a.useEffect(()=>{(async()=>{try{const n=await fetch("https://osrs.openrune.dev/public/sprite/");if(!n.ok)throw new Error("Network response was not ok");const i=(await n.json()).map(c=>({id:c.id,offsetX:c.offsetX}));f(i.sort((c,C)=>c.id-C.id)),h(i)}catch(n){console.error("Error fetching data:",n)}finally{w(!1)}})()},[]);const T=async r=>{try{const n=await fetch(`https://osrs.openrune.dev/public/sprite/${r}`);if(!n.ok)throw new Error("Error fetching sprite");const x=await n.blob(),i=window.URL.createObjectURL(x),c=document.createElement("a");c.href=i,c.download=`sprite_${r}.png`,document.body.appendChild(c),c.click(),document.body.removeChild(c)}catch(n){console.error("Error downloading sprite:",n)}},J=async()=>{const r=new K;j(!0);const n=t.length;let x=0;for(const i of t){try{const C=await fetch(`https://osrs.openrune.dev/public/sprite/${i.id}`);if(C.ok){const G=await C.blob();r.file(`sprite_${i.id}.png`,G)}}catch(C){console.error(`Error downloading sprite ${i.id}:`,C)}x+=1;const c=Math.round(x/n*100);z(c)}r.generateAsync({type:"blob"}).then(i=>{Q.saveAs(i,"all_sprites.zip"),j(!1)})},U=r=>{const n=r.target.value;d(n);const x=s.filter(i=>i.id.toString().includes(n));h(x)},F=r=>{v(r),l(!0)},X=e.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center",marginBottom:"10px"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(ee,{type:"text",placeholder:"Search ID",value:b,onChange:U,style:{width:"150px",padding:"8px",marginRight:"8px"}})}),e.jsx(S,{color:"primary",onClick:J,style:{marginLeft:"auto"},children:"Download All Textures"})]}),Z=[{key:"id",label:"ID",_style:{width:"30%"},filter:!1,sorter:!1},{key:"sprite",label:"Sprite",filter:!1,sorter:!1}],H={sprite:r=>e.jsx("td",{children:e.jsx(k,{onClick:()=>F(r),rounded:!0,thumbnail:!0,id:r.id,width:40,height:40,keepAspectRatio:!0},r.id)})},q=({item:r})=>e.jsx(e.Fragment,{children:e.jsx(k,{id:r.id})});return e.jsxs(e.Fragment,{children:[e.jsx(W,{pageTitle:"Sprites",tableData:t,fetchData:()=>{},customFilters:X,columns:Z,scopedColumns:H,loading:m,CModalContent:q,handleRowClick:F,handleDownloadItemIcon:T}),e.jsxs(M,{alignment:"center",visible:y,onClose:()=>l(!1),children:[e.jsx(I,{children:e.jsx(A,{children:"Sprite Details"})}),e.jsx($,{children:g&&e.jsx(k,{id:g.id})}),e.jsxs(L,{children:[e.jsx(S,{color:"primary",onClick:()=>T(g.id),children:"Download Sprite"}),e.jsx(S,{color:"secondary",onClick:()=>l(!1),children:"Close"})]})]}),e.jsxs(M,{alignment:"center",visible:O,onClose:()=>j(!1),children:[e.jsx(I,{children:e.jsx(A,{children:"Downloading Sprites"})}),e.jsxs($,{children:[e.jsx("p",{children:"Zipping and downloading all sprites. Please wait..."}),e.jsx(B,{value:N,className:"mb-3"}),e.jsxs("p",{children:[N,"% completed"]})]}),e.jsx(L,{children:e.jsx(S,{color:"secondary",onClick:()=>j(!1),disabled:N<100,children:"Close"})})]})]})};export{le as default};
//# sourceMappingURL=Sprites-CAIzC73k.js.map
